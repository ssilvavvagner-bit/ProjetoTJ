<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Not√≠cias em Destaque - TJRS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      /* ===== Reset b√°sico ===== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #eef1f5;
        padding: 20px;
        display: flex;
        justify-content: center;
      }

      .container {
        width: 100%;
        max-width: 900px;
        background: #fff;
        padding: 30px 40px;
        border-radius: 14px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
        }
      }

      h1 {
        text-align: center;
        margin-bottom: 10px;
        font-size: 2rem;
        font-weight: 600;
        color: #333;
      }

      .info {
        text-align: center;
        color: #666;
        font-size: 0.95rem;
        margin-bottom: 20px;
      }

      button {
        display: inline-block;
        background: #0a66c2;
        color: white;
        padding: 10px 18px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-size: 1rem;
        transition: 0.2s;
        margin-bottom: 20px;
      }

      button:hover {
        background: #084c95;
      }

      #status {
        font-size: 0.95rem;
        color: #444;
        margin-bottom: 15px;
      }

      .erro {
        color: #d72638;
        font-weight: bold;
      }

      /* ===== Lista de not√≠cias ===== */
      .lista {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .card-noticia {
        background: #fafafa;
        padding: 15px 20px;
        border-left: 5px solid #0a66c2;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        font-size: 1rem;
        color: #333;
        transition: 0.25s ease;
        animation: fadeIn 0.4s ease;
      }

      .card-noticia:hover {
        transform: translateX(6px);
        background: #f0f6ff;
      }
    </style>

  </head>
  <body>
    <div class="container">
      <h1>Not√≠cias em Destaque - TJRS</h1>
      <p class="info">
        Esta p√°gina busca automaticamente os t√≠tulos exibidos no carrossel
        principal da p√°gina inicial do TJRS.
      </p>

      <button id="btnAtualizar">üîÑ Atualizar agora</button>

      <p id="status"></p>

      <div id="listaNoticias" class="lista"></div>
    </div>

    <script>
      async function carregarNoticias() {
        const status = document.getElementById("status");
        const lista = document.getElementById("listaNoticias");

        status.textContent = "Carregando not√≠cias...";
        lista.innerHTML = "";

        try {
          const resp = await fetch("/api/noticias-destaque");
          if (!resp.ok) throw new Error("Erro HTTP: " + resp.status);

          const data = await resp.json();

          if (!data.noticias || data.noticias.length === 0) {
            status.innerHTML =
              '<span class="erro">Nenhuma not√≠cia encontrada. Talvez o layout do site tenha mudado.</span>';
            return;
          }

          status.textContent =
            "√öltima atualiza√ß√£o: " +
            new Date(data.atualizadoEm).toLocaleString("pt-BR") +
            ` ‚Äî ${data.quantidade} not√≠cias`;

          data.noticias.forEach((item) => {
            const card = document.createElement("div");
            card.className = "card-noticia";
            card.textContent = item.titulo;
            lista.appendChild(card);
          });
        } catch (err) {
          console.error(err);
          status.innerHTML =
            '<span class="erro">Erro ao carregar not√≠cias. Veja o console para detalhes.</span>';
        }
      }

      document.getElementById("btnAtualizar")
        .addEventListener("click", carregarNoticias);

      carregarNoticias();
    </script>
  </body>
</html>
